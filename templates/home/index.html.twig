{% extends 'base.html.twig' %}

{% block title %}Linkr - Accueil
{% endblock %}

{% block body %}
	<div class="bg-linear-to-br from-gray-50 via-white to-gray-50">

		{% include 'components/header.html.twig' %}

		<main class="pt-24">

            {% if not is_granted('ROLE_BANNED')%}
                {% if app.user %}
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-bold text-4xl my-32">
                        <h1 class="text-center">Bienvenue
                            {{ app.user.firstName }}
                            {{ app.user.lastName }}</h1>
                    </div>
                {% endif %}

                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex gap-10 justify-center">

                        <div class="flex-1 max-w-2xl">
                            <div class="space-y-8 mt-4">

                                {% for publication in publications %}
                                    {% include 'components/publication.html.twig' with {'publication': publication} only %}
                                {% endfor %}

                                {% if not app.user %}
                                    {% if hasMorePublications %}
                                        <div class="relative rounded-2xl overflow-hidden">
                                            <div class="bg-linear-to-b from-white via-gray-50/50 to-transparent py-16 px-6 text-center">
                                                <p class="text-gray-600 text-sm mb-6 font-medium">
                                                    Il y a encore plus de publications à découvrir
                                                </p>
                                                <a href="/login" class="inline-block px-8 py-3 bg-linear-to-r from-slate-900 via-indigo-900 to-slate-900 text-white font-semibold rounded-full text-sm tracking-wide shadow-lg shadow-indigo-900/25 hover:shadow-xl hover:shadow-indigo-900/35 transition-all duration-300 hover:scale-105">
                                                    Se connecter pour voir plus
                                                </a>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endif %}

                            </div>
                        </div>

                        {% if app.user %}
                            {% include 'components/suggestions.html.twig' %}
                        {% endif %}

                    </div>
                </div>
            {% endif %}

            {% if is_granted('ROLE_BANNED')%}
                <div class="w-fit min-h-screen pt-32 mx-auto">
                        <h1 class="text-center">Vous avez été banni.</h1>
                    </div>
            {% endif %}

		</main>

		{% include 'components/footer.html.twig' %}
	</div>
{% endblock %}
